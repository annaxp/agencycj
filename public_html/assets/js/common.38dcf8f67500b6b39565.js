(()=>{"use strict";var t;t={hasErrors:[],firstClick:!0,setHasErrors:function(e){var r=e.type,n=e.prop;!0===r?t.hasErrors.includes(n)||t.hasErrors.push(n):t.hasErrors=t.hasErrors.filter((function(t){return t!==n})),t.listener&&t.listener({hasErrors:t.hasErrors,firstClick:t.firstClick})}},document.addEventListener("DOMContentLoaded",(function(){!function(e){var r=e.querySelector("form"),n=r.querySelector('input[name="name"]'),s=r.querySelector('input[name="phone"]'),o=r.querySelector("button");function c(t){null!=t&&t.ok?function(t){t.innerHTML='\n        <div class="form-success">\n          <div class="form-success__content">'.concat(t.getAttribute("data-success")||"Успех","</div>\n        </div>\n      ")}(e):function(t){console.log(t)}(t)}function a(e){var r=e.target,n="name";r.value?(u({type:"success",target:r}),t.setHasErrors({type:!1,prop:n})):(u({type:"empty",target:r}),t.setHasErrors({type:!0,prop:n}))}function i(e){var r=e.target,n="phone";r.value?(u({type:"success",target:r}),t.setHasErrors({type:!1,prop:n})):(u({type:"empty",target:r}),t.setHasErrors({type:!0,prop:n}))}function u(t){var e=t.target,r=t.type;"empty"===r?e.parentElement.classList.add("empty"):"success"===r&&e.parentElement.classList.remove("empty")}function l(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?(r.classList.remove("error"),o.removeAttribute("disabled")):(r.classList.add("error"),o.setAttribute("disabled",!0))}o.onclick=function(e){if(e.preventDefault(),t.hasErrors.length&&t.firstClick)return t.firstClick=!1,l(!0),!1;var o="name=".concat(n.value,"&phone=").concat(s.value,"&antispam=antispam"),a="".concat(r.action,"?").concat(o);fetch(a).then((function(t){return t.json()})).then((function(t){return c(t)})).catch((function(t){return console.log(t)}))},t.listener=function(t){var e=t.hasErrors,r=t.firstClick;e.length||r?e.length&&!r&&l(!0):l(!1)},a({target:n}),i({target:s}),["onchange","onkeyup","onBlur"].forEach((function(t){n[t]=a,s[t]=i}))}(document.querySelector(".form-container"))}))})();